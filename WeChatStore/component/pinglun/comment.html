<!DOCTYPE html>
<html>

	<head>
		<title>评论</title>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
		<link rel="stylesheet" href="../../css/weui.min.css">
		<link rel="stylesheet" href="../../css/jquery-weui.css">
		<link rel="stylesheet" href="../../css/style.css">
		<link rel="stylesheet" type="text/css" href="../../css/index.css" />
		<link rel="stylesheet" href="https://res.wx.qq.com/open/libs/weui/0.3.0/weui.css" />
	</head>

	<body ontouchstart>
		<header class="wy-header_article">
			<div class="wy-header-icon-back"><span></span></div>
			<div class="wy-header-icon-right">
				<p>写评论</p>
			</div>
		</header>
		<div class="weui-media-box_appmsg ord-pro-list weui-media-comment">
			<div class="weui-media-box__hd">
				<a href="pro_info.html"><img class="weui-media-box__thumb" src="../../img/e.png" alt=""></a>
			</div>
			<div class="weui-media-box__bd">
				<h1 class="weui-media-box__desc"><a href="pro_info.html" class="ord-pro-link">众生相原创潮牌男夏装  文艺休闲舒适透气印花T恤半袖T恤  偷月船</a></h1>
				<p class="weui-media-box__desc">规格：<span>红色</span>，<span>23</span></p>
				<div class="clear mg-t-10">
					<div class="wy-pro-pri fl">¥<em class="num font-15">296.00</em>&nbsp;<em style="color: #a4a4a4;">积分：<i>29600</i></em></div>
					<div class="pro-amount fr"><span class="font-13">数量×<em class="name">1</em></span></div>
				</div>
			</div>
		</div>
		<div class="order-list-Below clear">
			<h1>商品评价</h1>
			<ul>
				<li class="on"></li>
				<li class="on"></li>
				<li class="on"></li>
				<li class="on"></li>
				<li class="on"></li>
			</ul>
		</div>
		<div class="weui-cells weui-cells_form com-txt-area">
			<div class="weui-cell">
				<div class="weui-cell__bd">
					<textarea class="weui-textarea txt-area" placeholder="这个商品满足你的期待吗？说说你的使用心得，分享给想买的他们吧" rows="3"></textarea>
					<div class="weui-textarea-counter font-12 num"><span>0/200</span></div>
				</div>
			</div>
		</div>
		<div class="weui-cells weui-cells_checkbox commg">
			<label class="weui-cell weui-check__label" for="s11">
		      <div class="weui-cell__hd">
		        <input type="checkbox" class="weui-check" name="checkbox1" id="s11" checked="checked">
		        <i class="weui-icon-checked"></i>
		      </div>
		      <div class="weui-cell__bd"><p>匿名评价</p></div>
		    </label>
		</div>
		<div class="weui_cells weui_cells_form" style="margin-top: 0px;">
			<div class="weui_cell">
				<div class="weui_cell_bd weui_cell_primary">
					<div class="weui_uploader">
						<div class="weui_uploader_hd weui_cell">
							<div class="weui_cell_bd weui_cell_primary" style="font-size: 14px;">图片上传</div>
							<div class="weui_cell_ft js_counter" style="font-size: 14px;">0/6</div>
						</div>
						<div class="weui_uploader_bd">
							<ul class="weui_uploader_files">
								<!-- 预览图插入到这 -->
							</ul>
							<div class="weui_uploader_input_wrp">
								<input class="weui_uploader_input js_file" type="file" accept="image/jpg,image/jpeg,image/png,image/gif" multiple="">
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="theSubmit">
			<a href="javascript:void(0);">立即评价</a>
		</div>
		<!--底部导航-->
		<div class="foot-black"></div>
		<div class="weui-tabbar">
			<a href="../shopCar/shopcart.html" class="weui-tabbar__item">
				<div class="weui-tabbar__icon foot-menu-cart">
				</div>
				<p class="weui-tabbar__label">购物车</p>
			</a>
			<a href="../Mall/indexOne.html" class="weui-tabbar__item">
				<div class="weui-tabbar__icon foot-menu-member">
				</div>
				<p class="weui-tabbar__label ">积分商城</p>
			</a>
			<a href="../information/myIformation.html" class="weui-tabbar__item">
				<div class="weui-tabbar__icon foot-menu-home">
				</div>
				<p class="weui-tabbar__label">我的信息</p>
			</a>
		</div>

		<script src="../../js/jquery-2.1.4.js"></script>
		<script src="../../js/fastclick.js"></script>
		<script>
			$(function() {
				FastClick.attach(document.body);
			});
		</script>
		<script src="../../js/jquery-weui.js"></script>
		<script type="text/javascript">
			$(".order-list-Below ul li").click(
				function() {
					var num = $(this).index() + 1;
					var len = $(this).index();
					var thats = $(this).parent(".order-list-Below ul").find("li");
					if($(thats).eq(len).attr("class") == "on") {
						if($(thats).eq(num).attr("class") == "on") {
							$(thats).removeClass();
							for(var i = 0; i < num; i++) {
								$(thats).eq(i).addClass("on");
							}
						} else {
							$(thats).removeClass();
							for(var k = 0; k < len; k++) {
								$(thats).eq(k).addClass("on");
							}
						}
					} else {
						$(thats).removeClass();
						for(var j = 0; j < num; j++) {
							$(thats).eq(j).addClass("on");
						}
					}
				}
			);
		</script>
		<script>
			$(function() {
				// 允许上传的图片类型  
				var allowTypes = ['image/jpg', 'image/jpeg', 'image/png', 'image/gif'];
				// 1024KB，也就是 1MB  
				var maxSize = 1024 * 1024;
				// 图片最大宽度  
				var maxWidth = 300;
				// 最大上传图片数量  
				var maxCount = 6;
				$('.js_file').on('change', function(event) {
					var files = event.target.files;

					// 如果没有选中文件，直接返回  
					if(files.length === 0) {
						return;
					}

					for(var i = 0, len = files.length; i < len; i++) {
						var file = files[i];
						var reader = new FileReader();

						// 如果类型不在允许的类型范围内  
						if(allowTypes.indexOf(file.type) === -1) {
							$.weui.alert({
								text: '该类型不允许上传'
							});
							continue;
						}

						if(file.size > maxSize) {
							$.weui.alert({
								text: '图片太大，不允许上传'
							});
							continue;
						}

						if($('.weui_uploader_file').length >= maxCount) {
							$.weui.alert({
								text: '最多只能上传' + maxCount + '张图片'
							});
							return;
						}

						reader.onload = function(e) {
							var img = new Image();
							img.onload = function() {
								// 不要超出最大宽度  
								var w = Math.min(maxWidth, img.width);
								// 高度按比例计算  
								var h = img.height * (w / img.width);
								var canvas = document.createElement('canvas');
								var ctx = canvas.getContext('2d');
								// 设置 canvas 的宽度和高度  
								canvas.width = w;
								canvas.height = h;
								ctx.drawImage(img, 0, 0, w, h);
								var base64 = canvas.toDataURL('image/png');

								// 插入到预览区  
								var $preview = $('<li class="weui_uploader_file weui_uploader_status" style="background-image:url(' + base64 + ')"><div class="weui_uploader_status_content">0%</div></li>');
								$('.weui_uploader_files').append($preview);
								var num = $('.weui_uploader_file').length;
								$('.js_counter').text(num + '/' + maxCount);

								// 然后假装在上传，可以post base64格式，也可以构造blob对象上传，也可以用微信JSSDK上传  

								var progress = 0;

								function uploading() {
									$preview.find('.weui_uploader_status_content').text(++progress + '%');
									if(progress < 100) {
										setTimeout(uploading, 30);
									} else {
										// 如果是失败，塞一个失败图标  
										$preview.find('.weui_uploader_status_content').html('<i class="weui_icon_warn"></i>');  
										$preview.removeClass('weui_uploader_status').find('.weui_uploader_status_content').remove();
									}
								}
								setTimeout(uploading, 30);
							};

							img.src = e.target.result;
						};
						reader.readAsDataURL(file);
					}
				});
			});
//			# sourceURL=pen.js
		</script>
	</body>

</html>